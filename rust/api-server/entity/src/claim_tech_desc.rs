//! `SeaORM` Entity. Generated by sea-orm-codegen 0.12.15

use game_module::module_bindings::ClaimTechDesc;
use sea_orm::entity::prelude::*;
use serde::{Deserialize, Serialize};
use ts_rs::TS;

#[derive(Clone, Debug, PartialEq, DeriveEntityModel, Serialize, Deserialize, TS)]
#[ts(rename = "ClaimTechDesc")]
#[sea_orm(table_name = "claim_tech_desc")]
pub struct Model {
    #[sea_orm(primary_key, auto_increment = false)]
    pub id: i32,
    pub name: String,
    pub description: String,
    pub tier: i32,
    pub tech_type: ClaimTechType,
    pub supplies_cost: i32,
    pub research_time: i32,
    #[sea_orm(column_type = "Json")]
    pub requirements: Vec<i32>,
    #[sea_orm(column_type = "Json")]
    pub input: Vec<crate::shared::item_stack::ItemStack>,
    pub members: i32,
    pub area: i32,
    pub supplies: i32,
    pub xp_to_mint_hex_coin: i32,
    pub unlocks_techs: Vec<i32>,
}

#[derive(Copy, Clone, Debug, EnumIter, DeriveRelation)]
pub enum Relation {}

impl ActiveModelBehavior for ActiveModel {}

#[derive(Clone, Debug, PartialEq, Eq, EnumIter, DeriveActiveEnum, Serialize, Deserialize, TS)]
#[sea_orm(rs_type = "i32", db_type = "Integer")]
pub enum ClaimTechType {
    Undefined = 0,
    TierUpgrade = 1,
    MemberCount = 2,
    MaxSupplies = 3,
    ClaimArea = 4,
    Settlement = 5,
    Forestry = 6,
    Carpentry = 7,
    Masonry = 8,
    Mining = 9,
    Smithing = 11,
    Scholar = 12,
    Leatherworking = 13,
    Hunting = 14,
    Tailoring = 15,
    Farming = 16,
    Fishing = 17,
    Foraging = 18,
    Empire = 19,
    TownBank = 22,
    LargeHouse = 23,
    TownMarket = 24,
}

impl From<game_module::module_bindings::ClaimTechType> for ClaimTechType {
    fn from(value: game_module::module_bindings::ClaimTechType) -> Self {
        match value {
            game_module::module_bindings::ClaimTechType::Undefined => ClaimTechType::Undefined,
            game_module::module_bindings::ClaimTechType::TierUpgrade => ClaimTechType::TierUpgrade,
            game_module::module_bindings::ClaimTechType::MemberCount => ClaimTechType::MemberCount,
            game_module::module_bindings::ClaimTechType::MaxSupplies => ClaimTechType::MaxSupplies,
            game_module::module_bindings::ClaimTechType::ClaimArea => ClaimTechType::ClaimArea,
            game_module::module_bindings::ClaimTechType::Settlement => ClaimTechType::Settlement,
            game_module::module_bindings::ClaimTechType::Forestry => ClaimTechType::Forestry,
            game_module::module_bindings::ClaimTechType::Carpentry => ClaimTechType::Carpentry,
            game_module::module_bindings::ClaimTechType::Masonry => ClaimTechType::Masonry,
            game_module::module_bindings::ClaimTechType::Mining => ClaimTechType::Mining,
            game_module::module_bindings::ClaimTechType::Smithing => ClaimTechType::Smithing,
            game_module::module_bindings::ClaimTechType::Scholar => ClaimTechType::Scholar,
            game_module::module_bindings::ClaimTechType::Leatherworking => {
                ClaimTechType::Leatherworking
            }
            game_module::module_bindings::ClaimTechType::Hunting => ClaimTechType::Hunting,
            game_module::module_bindings::ClaimTechType::Tailoring => ClaimTechType::Tailoring,
            game_module::module_bindings::ClaimTechType::Farming => ClaimTechType::Farming,
            game_module::module_bindings::ClaimTechType::Fishing => ClaimTechType::Fishing,
            game_module::module_bindings::ClaimTechType::Foraging => ClaimTechType::Foraging,
            game_module::module_bindings::ClaimTechType::Empire => ClaimTechType::Empire,
            game_module::module_bindings::ClaimTechType::TownBank => ClaimTechType::TownBank,
            game_module::module_bindings::ClaimTechType::LargeHouse => ClaimTechType::LargeHouse,
            game_module::module_bindings::ClaimTechType::TownMarket => ClaimTechType::TownMarket,
        }
    }
}

impl From<ClaimTechDesc> for Model {
    fn from(claim_tech_state: ClaimTechDesc) -> Self {
        Self {
            id: claim_tech_state.id,
            name: claim_tech_state.name,
            description: claim_tech_state.description,
            tier: claim_tech_state.tier,
            tech_type: claim_tech_state.tech_type.into(),
            supplies_cost: claim_tech_state.supplies_cost,
            research_time: claim_tech_state.research_time,
            requirements: claim_tech_state.requirements,
            input: claim_tech_state.input.into_iter().map(Into::into).collect(),
            members: claim_tech_state.members,
            area: claim_tech_state.area,
            supplies: claim_tech_state.supplies,
            xp_to_mint_hex_coin: claim_tech_state.xp_to_mint_hex_coin as i32,
            unlocks_techs: claim_tech_state.unlocks_techs,
        }
    }
}
